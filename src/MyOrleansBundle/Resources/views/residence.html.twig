{% extends 'MyOrleansBundle::layout.html.twig' %}

{% block content %}
    <div class="row">
        <div class="col offset-s1 retourSearch">
            <a class="waves-effect waves-light btn"
               href="#" onclick="javascript:history.back()">
                <i class="fa fa-caret-left white-text"></i> RETOUR AUX RÉSULTATS DE MA RECHERCHE</a>
        </div>
    </div>
    <div class="sliderResidence">
        <div class="slider">
            <ul class="slides">
                <li>
                    {% for media in residence.medias if media.typeMedia.nom == 'image-cover' %}
                        <img id="image" src="{{ asset('uploads/'~media.mediaName) }}" alt="résidence">
                    {% endfor %}
                    <div id="surCouche">
                        <a href="#" {% if residence.lienYoutube != null %}onclick="imageByYoutube()"{% endif %}><i
                                    class="material-icons white-text">play_circle_outline</i></a>
                        <div class="encart center">
                            <h2>{{ residence.nom }}</h2>
                            <p>{{ residence.ville.nom }}{% if residence.quartier != null %} - {{ residence.quartier.nom }}{% endif %}
                            </p>
                        </div>
                    </div>
                    <iframe id="ytplayer" type="text/html" width="100%" height="720"
                            src="http://www.youtube.com/embed/{{ residence.lienYoutube }}?autoplay=0&modestbranding=1&rel=0&showinfo=0"
                            frameborder="0"></iframe>
                </li>
                {% for media in residence.medias if media.typeMedia.nom == 'image' %}
                    <li>
                        <img src="{{ asset('uploads/'~media.mediaName) }}" alt="résidence">
                    </li>
                {% endfor %}
            </ul>
            <div class="col s12">
                <button class="prev btn-flat"><i class="material-icons white-text">chevron_left</i></button>
                <button class="next btn-flat"><i class="material-icons white-text">chevron_right</i></button>
            </div>
        </div>
    </div>
{% endblock content %}

{% block javascripts %}
    {{ parent() }}
    <script>
        function imageByYoutube() {
            document.getElementById('image').style.display = 'none';
            document.getElementById('surCouche').style.display = 'none';
            document.getElementById('ytplayer').style.display = 'block';
            document.getElementById('ytplayer').src = 'http://www.youtube.com/embed/{{ residence.lienYoutube }}?autoplay=1&modestbranding=1&rel=0&showinfo=0';
        }
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            // Slider residence
            $('.slider').slider({
                indicators: false,
                interval: 12000,
                height: null,
            });

            $('.slider').slider('pause');

            $('.next').click(function () {
                $('.slider').slider('next');
            });
            $('.prev').click(function () {
                $('.slider').slider('prev');
            });

            $('select').material_select();

            $('.parallax').parallax();

            $('.carousel').carousel({
                indicators: true,
                dist: 0,
                shift: 20,
                duration: 100
            });
        });
    </script>
{% endblock %}